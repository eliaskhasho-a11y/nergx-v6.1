import { setTheme, setLocale, addNotif, state } from './state.js';import { navigate } from './router.js';import { STRINGS } from './i18n.js';import { CONFIG } from './config.js';import { initRealtime } from './realtime.js';import { mountNotifications } from './ui/notifications.js';import { mountCoach } from './ui/aicoach.js';function initTheme(){const sel=document.getElementById('themeSel');sel.value=state.theme;setTheme(state.theme);sel.addEventListener('change',(e)=>setTheme(e.target.value))}function t(path){const parts=path.split('.');let cur=STRINGS[state.locale]||STRINGS[CONFIG.LOCALE]||STRINGS.sv;for(const p of parts){cur=cur?.[p]}return cur??path}function initNav(){const nav=document.getElementById('nav');nav.addEventListener('click',(e)=>{if(e.target.matches('button[data-route]')){nav.querySelectorAll('button').forEach(b=>b.classList.remove('active'));e.target.classList.add('active');navigate(e.target.dataset.route)}})}document.addEventListener('i18n:change',()=>{addNotif('Språk uppdaterat','success');const current=location.hash.replace('#/','')||'dashboard';navigate(current)});window.addEventListener('DOMContentLoaded',async()=>{initTheme();initNav();mountNotifications();mountCoach();initRealtime();const route=location.hash.replace('#/','')||'dashboard';await navigate(route);addNotif('Välkommen till MergX v6.1 (Vercel Ready, SWE)','success')});export { t };