export const state={theme:localStorage.getItem('mx_theme')||'light',locale:localStorage.getItem('mx_locale')||'sv',notifications:[],customers:[],products:[],orders:[],employees:[]};export function addNotif(msg,level='info'){const n={id:Date.now()+Math.random(),msg,level,ts:new Date().toISOString()};state.notifications.unshift(n);document.dispatchEvent(new CustomEvent('notif:add',{detail:n}))}export function setTheme(t){state.theme=t;localStorage.setItem('mx_theme',t);document.documentElement.classList.toggle('dark',t==='dark'||(t==='auto'&&window.matchMedia('(prefers-color-scheme: dark)').matches))}export function setLocale(lc){state.locale=lc;localStorage.setItem('mx_locale',lc);document.dispatchEvent(new CustomEvent('i18n:change',{detail:lc}))}