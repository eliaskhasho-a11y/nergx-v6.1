<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MergX v8.49 – Dashboard + AI</title>
  <link rel="stylesheet" href="./css/style.css" />
</head>

<body>
  <!-- SIDOPANEL -->
  <aside class="sidebar">
    <h1 class="logo">MergX</h1>
    <p class="version">v8.49 • Dashboard + AI</p>
    <ul class="nav">
      <li class="active">Översikt</li>
      <li>Kunder</li>
      <li>Inventarie</li>
      <li>Anställda</li>
      <li>Ordrar & Fakturor</li>
      <li>AI-Karta</li>
      <li>Teamchatt</li>
    </ul>
  </aside>

  <!-- HUVUDINNEHÅLL -->
  <main class="dashboard">
    <!-- KPI-KORT -->
    <section class="stats">
      <div class="stat-card" data-type="revenue">
        <h3>Omsättning (idag)</h3>
        <p class="value" id="revenue">–</p>
        <p class="change plus" id="revenueChange">–</p>
      </div>
      <div class="stat-card" data-type="orders">
        <h3>Ordrar (idag)</h3>
        <p class="value" id="orders">–</p>
        <p class="change plus" id="ordersChange">–</p>
      </div>
      <div class="stat-card" data-type="costs">
        <h3>Kostnader (idag)</h3>
        <p class="value" id="costs">–</p>
        <p class="change minus" id="costsChange">–</p>
      </div>
      <div class="stat-card" data-type="margin">
        <h3>Bruttomarginal</h3>
        <p class="value" id="margin">–</p>
        <p class="change plus" id="marginChange">–</p>
      </div>
    </section>

    <!-- GRAF -->
    <section class="chart-card" id="chartSection">
      <h2>Ekonomi – kompositchart</h2>
      <canvas id="chartCanvas"></canvas>
    </section>

    <!-- AI-ANALYS -->
    <section class="ai-section" id="aiSection">
      <h2>AI-Analys</h2>
      <p id="aiAnalysis">Analyserar data...</p>
    </section>

    <!-- AI-KARTA + TEAMCHATT -->
    <div class="map-chat-container">
      <section class="ai-map" id="mapSection">
        <h2>AI-Karta</h2>
        <ul id="aiMapList"></ul>
      </section>

      <section class="teamchat">
        <h2>Teamchatt</h2>
        <div class="chat-messages" id="chatMessages"></div>
        <form id="chatForm">
          <input type="text" id="chatInput" placeholder="Skriv ett meddelande..." autocomplete="off" />
        </form>
      </section>
    </div>
  </main>

  <!-- HÖGERPANEL: AI-NAV -->
  <aside class="ai-nav">
    <div class="ai-card">
      <h3>AI-Förslag</h3>
      <ul id="aiSuggestions"></ul>
    </div>
    <div class="ai-card">
      <h3>AI-Notiser</h3>
      <ul id="aiNotes"></ul>
    </div>
    <div class="ai-card">
      <h3>AI-Rutt & Leads</h3>
      <ol id="aiLeads"></ol>
    </div>
  </aside>

  <!-- MODAL FÖR EXPANDERADE MODULER -->
  <div id="expandModal" class="modal hidden">
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal-content glass-elevated">
      <button class="close-modal" id="closeModal">×</button>
      <h2 id="modalTitle">Detaljer</h2>
      <div class="modal-grid">
        <div class="modal-block">
          <h3>Detaljerad data</h3>
          <p id="modalDetails">–</p>
        </div>
        <div class="modal-block">
          <h3>AI-Analys</h3>
          <p id="aiModalAnalysis">–</p>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
