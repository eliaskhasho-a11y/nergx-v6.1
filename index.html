<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MergX v8.33 Core</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body class="theme-light">
  <div id="app">
    <!-- Sidebar -->
    <aside class="sidebar glass">
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
        <div style="width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,#79C2FF,#B6F3FF);"></div>
        <strong>MergX</strong>
      </div>

      <button class="nav__link is-active" data-page="dashboard">√ñversikt</button>
      <button class="nav__link" data-page="customers">Kunder</button>
      <button class="nav__link" data-page="inventory">Inventarie</button>
      <button class="nav__link" data-page="orders">Ordrar / Fakturor</button>
      <button class="nav__link" data-page="files">Filer & Kvitton</button>
      <button class="nav__link" data-page="settings">Inst√§llningar</button>
      <button class="nav__link" data-page="chat">Teamchatt</button>
    </aside>

    <!-- Main -->
    <main class="main">
      <!-- Dashboard -->
      <section id="dashboard" class="page is-active">
        <div class="card" style="display:flex;gap:10px;align-items:center;justify-content:space-between;">
          <input id="globalSearch" class="input" placeholder="S√∂k kunder, ordrar, produkter‚Ä¶" style="flex:1;"/>
          <button id="themeToggle" class="nav__link" style="width:auto;">Tema</button>
        </div>

        <!-- KPI -->
        <div id="kpiContainer" style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px;"></div>

        <!-- Ekonomi kombograf + AI-analys -->
        <div style="display:grid;grid-template-columns:2fr 1fr;gap:12px;margin-top:12px;">
          <div class="card kpi__card" data-title="Ekonomi ‚Äì Kombodiagram">
            <h3 style="margin:0 0 8px;">Ekonomi ‚Äì kombodiagram</h3>
            <div id="ecoCombo" class="glass" style="height:260px;display:flex;align-items:center;justify-content:center;">
              <span style="opacity:.7;">üìä Diagram placeholder</span>
            </div>
          </div>
          <div class="card kpi__card" data-title="AI Totalanalys">
            <h3 style="margin:0 0 8px;">AI Totalanalys</h3>
            <div class="glass" style="height:260px;padding:10px;overflow:auto;">
              <p id="aiTotal">AI-analys: sammanst√§llning av oms√§ttning, kostnader, lager och kundl√§ge‚Ä¶</p>
            </div>
          </div>
        </div>

        <!-- Karta + Mini-chatt -->
        <div style="display:grid;grid-template-columns:2fr 1fr;gap:12px;margin-top:12px;">
          <div class="card kpi__card" data-title="AI-Karta">
            <h3 style="margin:0 0 8px;">AI-Karta</h3>
            <div id="map" class="glass" style="height:260px;position:relative;z-index:0;"></div>
          </div>

          <div class="card">
            <h3 style="margin:0 0 8px;">Teamchatt (mini)</h3>
            <div class="chat">
              <div class="messages" id="miniChatList"></div>
              <div class="composer">
                <input id="miniChatInput" class="input" placeholder="Skriv ett meddelande‚Ä¶" />
                <button id="miniChatSend" class="nav__link" style="width:auto;">Skicka</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Customers -->
      <section id="customers" class="page">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h2 style="margin:0;">Kunder</h2>
            <button class="nav__link" id="addCustomerBtn" style="width:auto;">+ L√§gg till kund</button>
          </div>
          <div id="customerForm" class="glass" style="display:none;margin-top:10px;padding:12px;border-radius:12px;">
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;">
              <input class="input" placeholder="F√∂retagsnamn" />
              <input class="input" placeholder="Kontaktperson" />
              <input class="input" placeholder="E-post" />
              <input class="input" placeholder="Telefon" />
              <input class="input" placeholder="Org.nr" />
              <input class="input" placeholder="Adress" />
            </div>
            <div style="margin-top:10px;display:flex;gap:8px;">
              <button class="nav__link" style="width:auto;">Spara</button>
              <button class="nav__link" id="cancelCustomer" style="width:auto;">Avbryt</button>
            </div>
          </div>

          <table class="table" style="margin-top:12px;">
            <thead>
              <tr><th>Namn</th><th>Stad</th><th>Status</th><th>Kontakt</th><th>√Ötg√§rd</th></tr>
            </thead>
            <tbody id="customerRows">
              <!-- Populeras via ai.js -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Inventory -->
      <section id="inventory" class="page">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h2 style="margin:0;">Inventarie</h2>
            <button class="nav__link" id="addProductBtn" style="width:auto;">+ L√§gg till produkt</button>
          </div>

          <div id="productForm" class="glass" style="display:none;margin-top:10px;padding:12px;border-radius:12px;">
            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;">
              <input class="input" placeholder="Artikelnummer" />
              <input class="input" placeholder="Namn" />
              <input class="input" placeholder="Typ" />
              <input class="input" placeholder="Pris (SEK)" />
            </div>
            <div style="display:flex;gap:10px;margin-top:10px;">
              <input class="input" placeholder="Antal i lager" />
              <button class="nav__link" style="width:auto;">Spara</button>
              <button class="nav__link" id="cancelProduct" style="width:auto;">Avbryt</button>
            </div>
          </div>

          <table class="table" style="margin-top:12px;">
            <thead>
              <tr><th>Art.nr</th><th>Namn</th><th>Typ</th><th>Antal</th><th>Pris</th><th>√Ötg√§rd</th></tr>
            </thead>
            <tbody id="inventoryRows">
              <!-- Populeras via ai.js -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Orders -->
      <section id="orders" class="page">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h2 style="margin:0;">Ordrar & Fakturor</h2>
            <button class="nav__link" id="newOrderBtn" style="width:auto;">+ Skapa order</button>
          </div>

          <table class="table" style="margin-top:12px;">
            <thead>
              <tr><th>#</th><th>Kund</th><th>Datum</th><th>Belopp</th><th>Status</th><th>Faktura</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>1001</td><td>Elon Kista</td><td>2025-11-03</td><td>12 495 SEK</td><td>Utskickad</td>
                <td>
                  <button class="nav__link btn-preview" style="width:auto;">üëÅ F√∂rhandsvisa</button>
                  <button class="nav__link" style="width:auto;">‚¨áÔ∏é PDF</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Files -->
      <section id="files" class="page">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h2 style="margin:0;">Filer & Kvitton</h2>
            <div style="display:flex;gap:8px;">
              <button class="nav__link" style="width:auto;">+ Ny mapp</button>
              <button class="nav__link" style="width:auto;">‚¨ÜÔ∏é Ladda upp</button>
            </div>
          </div>

          <div class="glass" style="margin-top:12px;padding:12px;border-radius:12px;">
            <p style="margin:0 0 8px;">Mappvy</p>
            <ul id="fileFolders" style="margin:0;padding-left:16px;">
              <li>üìÅ Kvitton</li>
              <li>üìÅ Avtal</li>
              <li>üìÅ √ñvrigt</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Settings -->
      <section id="settings" class="page">
        <div class="card">
          <h2 style="margin:0 0 10px;">Inst√§llningar</h2>
          <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;">
            <div class="glass" style="padding:12px;border-radius:12px;">
              <h3 style="margin:0 0 8px;">F√∂retagsuppgifter</h3>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
                <input class="input" placeholder="F√∂retagsnamn" />
                <input class="input" placeholder="Org.nr" />
                <input class="input" placeholder="Adress" />
                <input class="input" placeholder="E-post faktura" />
              </div>
            </div>
            <div class="glass" style="padding:12px;border-radius:12px;">
              <h3 style="margin:0 0 8px;">App</h3>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
                <select class="input">
                  <option>Svenska</option>
                  <option>Engelska</option>
                  <option>Thail√§ndska</option>
                </select>
                <select class="input">
                  <option>Ljust tema</option>
                  <option>M√∂rkt tema</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Team Chat (full) -->
      <section id="chat" class="page">
        <div class="card">
          <h2 style="margin:0 0 8px;">Teamchatt</h2>
          <div class="chat">
            <div class="messages" id="chatList"></div>
            <div class="composer">
              <input id="chatInput" class="input" placeholder="Skriv ett meddelande‚Ä¶" />
              <button id="chatSend" class="nav__link" style="width:auto;">Skicka</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal__dialog">
      <!-- fylls av JS -->
    </div>
  </div>

  <script src="./js/app.js"></script>
  <script src="./js/ai.js"></script>
</body>
</html>
